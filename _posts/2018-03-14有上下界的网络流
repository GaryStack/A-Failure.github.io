---
layout:     post
title:      "有上下界的网络流"
date:       2018-03-14
author:     "DieSheep"
header-img: "img/10071.jpg"
catalog: true
tags:
    - 网络流
---
有上下界的网络流

就是每条边都有一个*down*和*up*

流量*flow*必须满足*down*<=*flow*<=*up*

一般类型分为两种
### - 无源汇且保证流量平衡
### - 有源汇且除了源点和汇点满足流量平衡

流量平衡就是指这个点流入的总流量=这个点流出的总流量

# - 无源汇

- 一个~~烂大街~~错误典例：

把原图的每一条边的容量设为*up-down*，在原图上求一遍最大流

再加上最大的*down*

~~真这么简单的话我还写这篇博客干什么~~

其实仔细想想就会发现有问题

一个最简单的例子

img/updownwangluoliu.png

这个图的最大流是1

加上最大的*down*是5

显然不满足流量平衡了

- 正确姿势

我们一条边一条边的处理

把每一条边(u,v)拆成两条边，容量分别是*down*和*up-down*

然后yy一下

将容量为*down*的边先流满，然后在另一条边上xjb流就行了

现在主要问题是怎么让容量为*down*的边先流满

我们考虑建立附源点和附汇点

附源点连*v*，容量为*down*

*u*连附汇点，容量也为*down*

然后跑附源点到附汇点的最大流

如图：

img/updownwangluoliu2.png

yy一下

因为源点发出流量，所以附源点连v的边一定能流满

因为汇点接受流量，所以u连附汇点的边一定先被流满，然后再流另一条边

这样问题就解决啦
